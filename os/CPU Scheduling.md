
CPU 스케줄링은 여러 프로세스의 상황을 고려하여 CPU와 시스템 자원을 어떻게 배정할지 결정하는 일을 말함.
# CPU Scheduler

- 고수준 스케줄링 - Job
- 중간 수준 스케줄링 - Buffer
- 저수준 스케줄링 - 단기 스케줄링

### 고수준 스케줄링

고수준 스케줄링은 시스템 내의 전체 작업 수를 조절 한다. 작업은 OS에서 다루는 일의 가장 큰 단위로, 1개 또는 여러개의 프로세스로 이루어진다.

전체 시스템의 부하를 고려하여 작업을 시작할지 말지를 결정한다.

### 저수준 스케줄링

저수준 스케줄링은 고수준과 반대로 가장 작은 단위의 스케줄링이다.

저수준 스케줄링은 어떤 프로세스에 CPU를 할당할지, 어떤 프로세스를 대기 상태로 보낼지 등을 결정함.

저수준 스케줄링은 아주 짧은 시간에 일어나기에 단기 스케줄링이라고 부른다.

CPU 스케줄러는 특별한 명시가 없는 한 저수준 스케줄러를 의미한다.

### 중간 수준 스케줄링

고수준과 저수준 사이의 Buffer 역할을 하는 스케줄링이다.

시스템의 부하를 조절하려면 중간 수준 스케줄링을 고려해야 한다.

중지와 활성화로 전체 시스템의 활성화된 프로세스 수를 조절하여 과부하를 막는다.

일부 프로세스를 중지 상태로 옮김으로써 나머지 프로세스가 원만하게 작동되도록 지원함.

### 스케줄링의 목적

- 공평성
- 효율성
- 안정성
- 확장성
- 반응 시간 보장
- 무한 연기 방지

# 스케줄링 시 고려 사항

## 선점형 스케줄링과 비선점형 스케줄링

- 선점 - 빼앗을 수 있음
- 비선점 - 빼앗을 수 없음

선점형 스케줄링은 운영체제가 CPU를 강제로 빼앗을 수 있는 스케줄링이다.

비선점형 스케줄링은 어떤 프로세스가 CPU를 점유하면 다른 프로세스가 이를 빼앗을 수 없는 스케줄링 방식이다.

선점형 스케줄링 방식의 대표적인 예는 인터럽트 처리.

인터럽트 처리가 완료되면 원래 작업으로 돌아간다.

선점형은 컨텍스트 스위칭과같은 부가적인 작업으로 인해 낭비가 생김.

대부분 저수준 스케줄러는 선점형 스케줄링 방식을 사용한다.

비선점형 스케줄링은 어떤 프로세스가 실행 상태에 들어가 CPU를 사용하면 그 프로세스가 종료되거나 자발적으로 대기 상태에 들어가기 전까지는 계속 실행된다. 스케줄러의 작업량이 적고 컨텍스트 스위칭에 의한 낭비가 적다.

## 프로세스 우선순위

프로세스는 커널 프로세스와 일반 프로세스로 나뉜다.

CPU 스케줄러는 각 프로세스에 우선순위를 부여하는데 커널 프로세스의 우선순위가 일반 프로세스보다 높다.

우선순위가 높다는 것은 더 빨리 자주 실행된다는 의미. 준비 상태의 커널 프로세스와 일반 프로세스가 하나씩 있다면 커널 프로세스의 우선순위가 더 높기 때문에 커널 프로세스가 먼저 실행되며 작업이 끝날 때가지 계속 CPU를 사용함.

또한 같은 커널 프로세스라 하더라도 더 중요한 커널 프로세스는 우선순위가 높고 덜 중요한 프로세스는 우선순위가 낮다.

일반 프로세스도 중요도가 각각 다르기 때문에 우선순위가 서로 다르다.

우선순위를 조절할 때는 해당 프로세스뿐 아니라 다른 프로세스의 실행 속도에 영향을 미친다는 점을 주의 해야한다.

시스템에는 다양한 우선순위의 프로세스가 공존하며 우선순위가 높은 프로세스가 CPU를 먼저 더 오래 차지한다.

## CPU 집중 프로세스와 입출력 집중 프로세스

CPU 집중 프로세스, 입출력 집중 프로세스

![A virtual machine scheduler based on CPU and I/O-bound features for  energy-aware in high performance computing clouds - ScienceDirect](https://ars.els-cdn.com/content/image/1-s2.0-S0045790616302270-gr1.jpg)
위에 보는 것 처럼 IO bound 는 IO에 시간이 오래 걸리기에 이때 CPU bound로 넘어가 작업을할수있음.

CPU 집중 프로세스와 입출력 집중 프로세스가 같이 있을 때는 입출력 집중 프로세스를 먼저 실행 상태로 옮기는 것이 효율적이다.

스케줄링할 때 입출력 집중 프로세스의 우선순위를 CPU 집중 프로세스보다 높이면 시스템 효율이 향상 된다.

입출력 집중 프로세스가 CPU 집중 프로세스보다 실행 상태에 먼저 들어가는 경우를 사이클 훔치기라고 함.
