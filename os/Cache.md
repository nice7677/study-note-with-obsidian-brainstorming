캐시는 CPU 와 메모리 간의 속도 차이를 완화해주기 위한 역할을 한다.

그 뿐만 아니라 캐시는 CPU가 앞으로 사용할 것에 대한 것을 예상하고 미리 준비한다.

이를 미리 가져오기(prefetch)라 한다.

위에 설명한 CPU가 앞으로 사용할 것을 예측하고 캐시가 미리 그 데이터를 준비했을때 원하는 데이터를 찾았다면 캐시 히트(cache hit)라고 하고 반대로 예측이 틀렸을 경우에는 캐시 미스(cache miss)라고 한다.

캐시 히트가 되는 적죽률은 일반 적으로 90%이다.

캐시 히트가 적용되는 경우 컴퓨터의 성능이 올라간다. 그럼 적중률을 높이는 방버으로는 캐시의 크기를 늘리거나 데이터를 가져오는 것이다.

멀리있는 데이터보다 가까운 데이터가 사용될 확률이 더 높다는 지역성 이론이 있음.

만약 코드안에 10라인다음에 실행되는건 멀리있는 101라인이 아니라 11번 라인이될 확률이 높기에 11-20 라인을 미리 준비해 놓을 수 있다.

캐시의 변경된 데이터를 메모리에 반영하는 방식에는 두가지 방식이 있다.

- 즉시 쓰기 - 즉시 쓰기는 데이터가 변하면 즉시 메모리에 반영한다. 하지만 빈번히 전송되는 데이터로 인해 성능이 느려진다. 하지만 계속 데이터가 유지되기에 정전에도 데이터를 잃어버리지 않는다.
- 지연 쓰기 - 지연 쓰기는 데이터가 변하는걸 모아 한번에 주기적으로 반영하는 방식이다. 이를 카피백이라고도 한다. 즉시 쓰기와는 다르게 주기적으로 변경하기에 시스템 성능에 좋을수있으나 메모리와 캐시 데이터가 다를수있다.

캐시는 두가지 레벨로 구분된다.

**명령어 캐시, 데이터 캐시는 CPU에 직접 연결되기 때문에 L1 (level1) 캐시라고 부른다.**
**일반 캐시는 메모리와 연결되기에 L2 (level2) 캐시라고 부른다.**

